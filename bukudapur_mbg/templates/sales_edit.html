{% extends "base.html" %}
{% block content %}

<div class="card">
  <div class="row" style="justify-content: space-between; align-items:center;">
    <div>
      <h3 class="title">Edit Penjualan</h3>
      <p class="subtitle">Update transaksi penjualan & jurnalnya akan dibuat ulang</p>
    </div>
    <a class="btn" href="{{ url_for('main.sales_home') }}">â¬… Kembali</a>
  </div>

  <hr class="sep">

  <form method="post" class="form-grid">
    <div class="col-4">
      <label class="subtitle">Tanggal</label>
      <input class="input" type="date" name="date" value="{{ tx.date.strftime('%Y-%m-%d') }}" required>
    </div>

    <div class="col-8">
      <label class="subtitle">Nama Customer (opsional)</label>
      <input class="input" type="text" name="customer_name" placeholder="mis: Andi">
      <p class="muted" style="margin-top:6px;">(Jika mau, tulis di catatan juga biar jelas.)</p>
    </div>

    <div class="col-6">
      <label class="subtitle">Akun Debit (Kas/Bank/Piutang)</label>
      <select class="input" name="debit_account" required>
        {% for a in debit_accounts %}
          <option value="{{ a.code }}" {% if a.code == tx.cash_account_code %}selected{% endif %}>
            {{ a.code }} - {{ a.name }}
          </option>
        {% endfor %}
      </select>
    </div>

    <div class="col-6">
      <label class="subtitle">Akun Pendapatan (Kredit)</label>
      <select class="input" name="revenue_account" required>
        {% for a in revenue_accounts %}
          <option value="{{ a.code }}" {% if a.code == tx.counter_account_code %}selected{% endif %}>
            {{ a.code }} - {{ a.name }}
          </option>
        {% endfor %}
      </select>
    </div>

    <div class="col-6">
      <label class="subtitle">Nominal</label>
      <input class="input" type="number" step="0.01" name="amount" value="{{ tx.amount }}" required>
    </div>

    <div class="col-6">
      <label class="subtitle">Catatan</label>
      <input class="input" type="text" name="memo" value="{{ raw_memo }}">
    </div>

    <div class="col-12 row" style="gap:10px;">
      <button class="btn btn-primary" type="submit">Simpan Perubahan</button>
      <a class="btn" href="{{ url_for('main.sales_home') }}">Batal</a>
    </div>
  </form>
</div>

{% endblock %}
